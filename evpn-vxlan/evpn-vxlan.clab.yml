name: evpn
prefix: __lab-name
mgmt:
  network: evpn_mgmt
  ipv4-subnet: 172.16.0.0/24
  ipv4-gw: 172.16.0.254
  ipv6-subnet: 3fff:172:16:0::/80
  ipv6-gw: 3fff:172:16:0::254
topology:
  defaults:
    kind: cisco_cat9kv
    image: vrnetlab/cisco_cat9kv:17.15.01
  kinds:
    cisco_cat9kv:
      startup-config: configs/__clabNodeName__-startup-config.cfg
  nodes:
    s1:
      mgmt-ipv4: 172.16.0.1
      mgmt-ipv6: 3fff:172:16:0::1
      env:
        VCPU: 8
        RAM: 20480
    s2:
      mgmt-ipv4: 172.16.0.2
      mgmt-ipv6: 3fff:172:16:0::2
      env:
        VCPU: 8
        RAM: 20480
    l1:
      mgmt-ipv4: 172.16.0.3
      mgmt-ipv6: 3fff:172:16:0::3
      env:
        VCPU: 8
        RAM: 20480
    l2:
      mgmt-ipv4: 172.16.0.4
      mgmt-ipv6: 3fff:172:16:0::4
      env:
        VCPU: 8
        RAM: 20480
    l3:
      mgmt-ipv4: 172.16.0.5
      mgmt-ipv6: 3fff:172:16:0::5
      env:
        VCPU: 8
        RAM: 20480
    n1:
      mgmt-ipv4: 172.16.0.11
      mgmt-ipv6: 3fff:172:16:0::11
      kind: linux
      image: ghcr.io/mapickett/alpine-ssh:latest
      exec:
        - ifconfig eth1 10.1.101.11 netmask 255.255.255.0
        - echo 0 >/proc/sys/net/ipv4/icmp_echo_ignore_broadcasts
    n2:
      mgmt-ipv4: 172.16.0.12
      mgmt-ipv6: 3fff:172:16:0::12
      kind: linux
      image: ghcr.io/mapickett/alpine-ssh:latest
      exec:
        - ifconfig eth2 10.1.101.12 netmask 255.255.255.0
        - echo 0 >/proc/sys/net/ipv4/icmp_echo_ignore_broadcasts
    n3:
      mgmt-ipv4: 172.16.0.13
      mgmt-ipv6: 3fff:172:16:0::13
      kind: linux
      image: ghcr.io/mapickett/alpine-ssh:latest
      exec:
        - ifconfig eth3 10.1.102.13 netmask 255.255.255.0
        - echo 0 >/proc/sys/net/ipv4/icmp_echo_ignore_broadcasts

  links:
    - endpoints: ["s1:GigabitEthernet1/0/1","l1:GigabitEthernet1/0/1"]
    - endpoints: ["s1:GigabitEthernet1/0/2","l2:GigabitEthernet1/0/1"]
    - endpoints: ["s1:GigabitEthernet1/0/3","l3:GigabitEthernet1/0/1"]
    - endpoints: ["s2:GigabitEthernet1/0/1","l1:GigabitEthernet1/0/2"]
    - endpoints: ["s2:GigabitEthernet1/0/2","l2:GigabitEthernet1/0/2"]
    - endpoints: ["s2:GigabitEthernet1/0/3","l3:GigabitEthernet1/0/2"]
    - endpoints: ["n1:eth1","l1:GigabitEthernet1/0/3"]
    - endpoints: ["n1:eth2","l2:GigabitEthernet1/0/3"]
    - endpoints: ["n1:eth3","l3:GigabitEthernet1/0/3"]
    - endpoints: ["n2:eth1","l1:GigabitEthernet1/0/4"]
    - endpoints: ["n2:eth2","l2:GigabitEthernet1/0/4"]
    - endpoints: ["n2:eth3","l3:GigabitEthernet1/0/4"]
    - endpoints: ["n3:eth1","l1:GigabitEthernet1/0/5"]
    - endpoints: ["n3:eth2","l2:GigabitEthernet1/0/5"]
    - endpoints: ["n3:eth3","l3:GigabitEthernet1/0/5"]
